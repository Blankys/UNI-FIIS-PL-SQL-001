/*
Ejemplo 1
Desarrollar un procedimiento para consultar 
el nombre y el sueldo de un empleado
Esquema: RECURSOS
*/

CREATE OR REPLACE PROCEDURE RECURSOS.PR_CONS_EMPL
(
  P_CODIGO   IN  VARCHAR2,
  P_NOMBRE   OUT NOCOPY VARCHAR2,
  P_SUELDO   OUT NOCOPY NUMBER,
  P_MENSAJE  OUT NOCOPY VARCHAR2
)
IS
BEGIN
  
  SELECT NOMBRE || ', ' || APELLIDO, SUELDO
  INTO   P_NOMBRE, P_SUELDO
  FROM   RECURSOS.EMPLEADO
  WHERE  IDEMPLEADO = P_CODIGO;
  
  P_MENSAJE := 'OK';

EXCEPTION

  WHEN NO_DATA_FOUND THEN
    P_MENSAJE := 'NO EXISTE EL CODIGO.';
    
END;
/


DECLARE
  P_CODIGO VARCHAR2(200);
  P_NOMBRE VARCHAR2(200);
  P_SUELDO NUMBER;
  P_MENSAJE VARCHAR2(200);
BEGIN
  -- DATO
  P_CODIGO := 'E0001';
  -- PROCESO
  RECURSOS.PR_CONS_EMPL(P_CODIGO,P_NOMBRE,P_SUELDO,P_MENSAJE);
  -- REPORTE
  IF P_MENSAJE = 'OK' THEN
    DBMS_OUTPUT.PUT_LINE('NOMBRE = ' || P_NOMBRE);
    DBMS_OUTPUT.PUT_LINE('SUELDO = ' || P_SUELDO);
  ELSE
    DBMS_OUTPUT.PUT_LINE('MENSAJE = ' || P_MENSAJE);
  END IF;
END;
/

SELECT * FROM RECURSOS.EMPLEADO;



